"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[716],{3905:(t,n,e)=>{e.d(n,{Zo:()=>p,kt:()=>E});var a=e(7294);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function d(t,n){if(null==t)return{};var e,a,r=function(t,n){if(null==t)return{};var e,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||(r[e]=t[e]);return r}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}var o=a.createContext({}),s=function(t){var n=a.useContext(o),e=n;return t&&(e="function"==typeof t?t(n):l(l({},n),t)),e},p=function(t){var n=s(t.components);return a.createElement(o.Provider,{value:n},t.children)},m="mdxType",u={inlineCode:"code",wrapper:function(t){var n=t.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(t,n){var e=t.components,r=t.mdxType,i=t.originalType,o=t.parentName,p=d(t,["components","mdxType","originalType","parentName"]),m=s(e),h=r,E=m["".concat(o,".").concat(h)]||m[h]||u[h]||i;return e?a.createElement(E,l(l({ref:n},p),{},{components:e})):a.createElement(E,l({ref:n},p))}));function E(t,n){var e=arguments,r=n&&n.mdxType;if("string"==typeof t||r){var i=e.length,l=new Array(i);l[0]=h;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=t,d[m]="string"==typeof t?t:r,l[1]=d;for(var s=2;s<i;s++)l[s]=e[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,e)}h.displayName="MDXCreateElement"},9195:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var a=e(7462),r=(e(7294),e(3905));const i={sidebar_position:3,title:"Permissions"},l="Permissions",d={unversionedId:"permissions",id:"permissions",title:"Permissions",description:"Setting up permissions",source:"@site/docs/permissions.md",sourceDirName:".",slug:"/permissions",permalink:"/react-native-health-connect/docs/permissions",draft:!1,editUrl:"https://github.com/matinzd/react-native-health-connect/tree/main/docs/docs/permissions.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Permissions"},sidebar:"tutorialSidebar",previous:{title:"Get started",permalink:"/react-native-health-connect/docs/get-started"},next:{title:"API Reference",permalink:"/react-native-health-connect/docs/category/api-reference"}},o={},s=[{value:"Setting up permissions",id:"setting-up-permissions",level:2},{value:"Complete list of permissions",id:"complete-list-of-permissions",level:2},{value:"Setting up permissions in Expo",id:"setting-up-permissions-in-expo",level:2}],p={toc:s};function m(t){let{components:n,...e}=t;return(0,r.kt)("wrapper",(0,a.Z)({},p,e,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"permissions"},"Permissions"),(0,r.kt)("h2",{id:"setting-up-permissions"},"Setting up permissions"),(0,r.kt)("p",null,"To access health data from the Health Connect app in your own app, you need to add the necessary permissions and filters to the app manifest."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the necessary permissions to ",(0,r.kt)("inlineCode",{parentName:"li"},"AndroidManifest.xml"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff",metastring:'title="android/src/main/AndroidManifest.xml"',title:'"android/src/main/AndroidManifest.xml"'},'<manifest xmlns:android="http://schemas.android.com/apk/res/android">\n    <uses-permission android:name="android.permission.INTERNET" />\n+   <uses-permission android:name="android.permission.health.READ_HEART_RATE"/>\n+   <uses-permission android:name="android.permission.health.WRITE_HEART_RATE"/>\n+   <uses-permission android:name="android.permission.health.READ_STEPS"/>\n+   <uses-permission android:name="android.permission.health.WRITE_STEPS"/>\n</manifest>\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the following highlighted code inside the activity tag as well:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff",metastring:'title="android/src/main/AndroidManifest.xml"',title:'"android/src/main/AndroidManifest.xml"'},'    <activity\n      android:name=".MainActivity"\n      android:label="@string/app_name"\n      android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize|uiMode"\n      android:launchMode="singleTask"\n      android:windowSoftInputMode="adjustResize"\n      android:exported="true">\n      <intent-filter>\n          <action android:name="android.intent.action.MAIN" />\n          <category android:name="android.intent.category.LAUNCHER" />\n      </intent-filter>\n      // highlight-start\n+     <intent-filter>\n+       <action android:name="androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE" />\n+     </intent-filter>\n      // highlight-end\n    </activity>\n')),(0,r.kt)("h2",{id:"complete-list-of-permissions"},"Complete list of permissions"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Record class type"),(0,r.kt)("th",{parentName:"tr",align:null},"Read permission declaration"),(0,r.kt)("th",{parentName:"tr",align:null},"Write permission declaration"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ActiveCaloriesBurned"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_ACTIVE_CALORIES_BURNED"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_ACTIVE_CALORIES_BURNED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BasalBodyTemperature"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BASAL_BODY_TEMPERATURE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BASAL_BODY_TEMPERATURE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BasalMetabolicRate"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BASAL_METABOLIC_RATE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BASAL_METABOLIC_RATE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BloodGlucose"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BLOOD_GLUCOSE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BLOOD_GLUCOSE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BloodPressure"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BLOOD_PRESSURE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BLOOD_PRESSURE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BodyFat"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BODY_FAT"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BODY_FAT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BodyTemperature"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BODY_TEMPERATURE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BODY_TEMPERATURE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BoneMass"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_BONE_MASS"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_BONE_MASS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CervicalMucus"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_CERVICAL_MUCUS"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_CERVICAL_MUCUS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CyclingPedalingCadence"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_EXERCISE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_EXERCISE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Distance"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_DISTANCE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_DISTANCE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ElevationGained"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_ELEVATION_GAINED"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_ELEVATION_GAINED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ExerciseSession"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_EXERCISE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_EXERCISE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FloorsClimbed"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_FLOORS_CLIMBED"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_FLOORS_CLIMBED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HeartRate"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_HEART_RATE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_HEART_RATE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Height"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_HEIGHT"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_HEIGHT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Hydration"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_HYDRATION"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_HYDRATION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LeanBodyMass"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_LEAN_BODY_MASS"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_LEAN_BODY_MASS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MenstruationFlow"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_MENSTRUATION"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_MENSTRUATION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MenstruationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_MENSTRUATION"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_MENSTRUATION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Nutrition"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_NUTRITION"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_NUTRITION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OvulationTest"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_OVULATION_TEST"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_OVULATION_TEST")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OxygenSaturation"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_OXYGEN_SATURATION"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_OXYGEN_SATURATION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Power"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_POWER"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_POWER")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RespiratoryRate"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_RESPIRATORY_RATE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_RESPIRATORY_RATE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RestingHeartRate"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_RESTING_HEART_RATE"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_RESTING_HEART_RATE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SexualActivity"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_SEXUAL_ACTIVITY"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_SEXUAL_ACTIVITY")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SleepSession"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_SLEEP"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_SLEEP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SleepStage"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_SLEEP"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_SLEEP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Speed"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_SPEED"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_SPEED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"StepsCadence"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_STEPS"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_STEPS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Steps"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_STEPS"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_STEPS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TotalCaloriesBurned"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_TOTAL_CALORIES_BURNED"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_TOTAL_CALORIES_BURNED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Vo2Max"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_VO2_MAX"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_VO2_MAX")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Weight"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_WEIGHT"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_WEIGHT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"WheelchairPushes"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.READ_WHEELCHAIR_PUSHES"),(0,r.kt)("td",{parentName:"tr",align:null},"android.permission.health.WRITE_WHEELCHAIR_PUSHES")))),(0,r.kt)("p",null,"You can read more about data types and permissions ",(0,r.kt)("a",{parentName:"p",href:"https://developer.android.com/guide/health-and-fitness/health-connect/data-and-data-types/data-types"},"here"),"."),(0,r.kt)("h2",{id:"setting-up-permissions-in-expo"},"Setting up permissions in Expo"),(0,r.kt)("p",null,"You will need to use ",(0,r.kt)("a",{parentName:"p",href:"https://docs.expo.dev/eas/"},"EAS Build")," and ",(0,r.kt)("a",{parentName:"p",href:"https://docs.expo.dev/config-plugins/introduction/"},"Config plugins")," in your project."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Edit app.json and add the permissions you need.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "expo": {\n    ...\n    "android": {\n      ...\n      "permissions": [\n        "android.permission.health.READ_STEPS",\n        "android.permission.health.WRITE_STEPS",\n        "android.permission.health.READ_ACTIVE_CALORIES_BURNED"\n      ]\n    },\n   ...\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a config plugin to insert the new ",(0,r.kt)("inlineCode",{parentName:"li"},"intent-filter")," ")),(0,r.kt)("p",null,"Add a new file in your project root (androidManifestPlugin.js)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const { withAndroidManifest } = require("@expo/config-plugins")\n\nmodule.exports = function androidManifestPlugin(config) {\n\n    return withAndroidManifest(config, async (config) => {\n\n        let androidManifest = config.modResults.manifest;\n\n        androidManifest.application[0].activity[0]["intent-filter"].push({\n            action: [\n                {\n                    $: {\n                        \'android:name\': "androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE"\n                    }\n                }\n            ]\n        });\n\n        return config;\n    });\n\n};\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Edit your app.json again and add this")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "expo": {\n    ...\n    "plugins": [\n      "./androidManifestPlugin.js",\n      [\n        "expo-build-properties",\n        {\n          "android": {\n            "compileSdkVersion": 33,\n            "targetSdkVersion": 33,\n            "minSdkVersion": 26\n          },\n          "ios": {\n            "deploymentTarget": "13.0"\n          }\n        }\n      ]\n    ]\n   ...\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Finally create a new EAS development build")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"eas build --profile development --platform android")))}m.isMDXComponent=!0}}]);